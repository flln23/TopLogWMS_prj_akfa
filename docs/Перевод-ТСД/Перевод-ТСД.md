# Как выполнять перевод ТСД

## Перевод заголовков элементов форм и шапок колонок таблиц

* В конце процедуры ОбработатьОткрытиеФормы (в ветке для переводимой формы) добавляем следующий кусок:

```1c
    #Область УстановкаЗаголовковЭлементовФормы
        ЗаголовкиЭлементовФормы = Новый Соответствие;
		//ЗаголовкиЭлементовФормы.Вставить(мТекущаяФорма.ЭлементыФормы.НадКоманда1, "ru = ''; uz = ''");
		
		ЗаголовкиКолонокТаблицы = Новый Соответствие;
		ЗаголовкиКолонокТаблицы.Вставить(мТекущаяФорма.ЭлементыФормы.ОсновнаяТаблица.Колонки.Адрес, "ru = 'Адрес'; uz = 'Manzil'");
        ЗаголовкиКолонокТаблицы.Вставить(мТекущаяФорма.ЭлементыФормы.ОсновнаяТаблица.Колонки.Остаток, "ru = 'ОСТАТОК'; uz = 'Qoldiq'");

		Для Каждого КиЗ Из ЗаголовкиЭлементовФормы Цикл
			КиЗ.Ключ.Заголовок = ВРег(ОбщегоНазначенияСервер.СтрокаНаЯзыке(КиЗ.Значение, ПараметрыСеанса.КодЯзыкаСеанса));
		КонецЦикла;
		
		Для Каждого КиЗ Из ЗаголовкиКолонокТаблицы Цикл
			КиЗ.Ключ.ТекстШапки = ВРег(ОбщегоНазначенияСервер.СтрокаНаЯзыке(КиЗ.Значение, ПараметрыСеанса.КодЯзыкаСеанса));
		КонецЦикла;
    #КонецОбласти
```

* В соответствиях храним: Ключ - элемент формы, Значение - многоязычная строка с тексом заголовка
* ЗаголовкиЭлементовФормы - элементы формы, у которых заголовок устанавливается в свойство "Заголовок" (надписи)
* ЗаголовкиКолонокТаблицы - элементы формы, у которых заголовок устанавливается в свойство "ТекстШапки" (колонки таблицы)

* В результате выполнения этого кода была переведена шапка колонки "Остаток":

![Переведенная форма ПросмотрОстатков](https://github.com/flln23/TopLogWMS_prj_akfa/blob/main/docs/Перевод-ТСД/img/Переведенная-форма-ПросмотрОстатков.png?raw=true)

## Перевод заголовков действий

* В процедуре НастроитьСписокДействий (в ветке для переводимой формы) добавляем следующий кусок:

```1c
// Установим синонимы действий, в зависимости от языка
мСинонимы.НайтиПоЗначению(Перечисления.ТерминалыДействия.Далее).Представление = ОбщегоНазначенияСервер.СтрокаНаЯзыке("ru = 'Выбрать'; uz = 'Tanlash'", ПараметрыСеанса.КодЯзыкаСеанса);
```

* мСинонимы.НайтиПоЗначению - т.к. действие добавляется автоматически из макета обработки "СписокДействий", выполняем поиск синонима

* В результате наших выполнения этой команды было переведено действие "Выбрать":

![Переведенное действие Выбрать на форме](https://github.com/flln23/TopLogWMS_prj_akfa/blob/main/docs/Перевод-ТСД/img/Переведенное-действие-Выбрать-на-форме.png?raw=true)

![Переведенное действие Выбрать в списке действий](https://github.com/flln23/TopLogWMS_prj_akfa/blob/main/docs/Перевод-ТСД/img/Переведенное-действие-Выбрать-в-списке-действий.png?raw=true)

## Перевод сообщений

* Когда сталкиваемся с конструкцией типа: Терминалы.Сообщить(ТекстСообщения), сразу передаем многоязычную строку в ТекстСообщения. Определение языка происходит внутри этой функции.

* Пример:

```1c
Терминалы.Сообщение("ru = 'Необходимо выбрать колонку для просмотра остатков!'; uz = 'Qoldiqlarni ko''rish uchun ustunni tanlashingiz kerak!'");
```

* В результате получаем сообщение на языке сеанса:

![Переведенное сообщение](https://github.com/flln23/TopLogWMS_prj_akfa/blob/main/docs/Перевод-ТСД/img/Переведенное-сообщение.png?raw=true)